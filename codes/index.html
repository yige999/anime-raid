<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Anime Raid Latest Codes (October 2025) | Active Redeem Codes</title>
    <meta name="description" content="Complete list of valid Anime Raid codes with 50+ active codes including ANIMERAID2025, SUMMERGIFT500. Real-time updates, expiration dates, and redemption guide.">

    <!-- SEO Meta Tags -->
    <meta name="keywords" content="anime raid codes, redeem code, animeraid2025, summergift500, gift code, reward code, promo codes">
    <meta name="author" content="Anime Raid Wiki">
    <link rel="canonical" href="https://animeraid.wiki/codes/">

    <!-- Open Graph -->
    <meta property="og:title" content="Anime Raid Latest Codes (October 2025) | Active Redeem Codes">
    <meta property="og:description" content="Complete list of valid Anime Raid codes with 50+ active codes, real-time status updates and redemption guide">
    <meta property="og:type" content="article">
    <meta property="og:url" href="https://animeraid.wiki/codes/">

    <!-- Performance Optimization: Preload Critical Resources -->
    <link rel="preload" href="../css/main.css" as="style">
    <link rel="preload" href="../js/main.js" as="script">
    <link rel="preload" href="../assets/images/logo.svg" as="image">

    <!-- DNS Prefetch for External Resources -->
    <link rel="dns-prefetch" href="//cdn.tailwindcss.com">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="../css/main.css">

    <!-- Favicon - SVG Format for Best Quality -->
    <link rel="icon" type="image/svg+xml" href="../assets/icons/favicon.svg">
    <link rel="shortcut icon" href="../assets/icons/favicon.svg">
    <link rel="apple-touch-icon" href="../assets/icons/favicon.svg">

    <!-- Enhanced Structured Data -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "Article",
        "headline": "Anime Raid Latest Codes (October 2025) | Active Redeem Codes",
        "description": "Complete list of valid Anime Raid codes with 50+ active codes, real-time status updates and redemption guide. Updated daily for latest rewards!",
        "author": {
            "@type": "Organization",
            "name": "Anime Raid Wiki",
            "url": "https://animeraid.wiki/"
        },
        "publisher": {
            "@type": "Organization",
            "name": "Anime Raid Wiki",
            "logo": {
                "@type": "ImageObject",
                "url": "https://animeraid.wiki/assets/images/logo.svg",
                "width": 200,
                "height": 50
            }
        },
        "datePublished": "2025-10-16",
        "dateModified": "2025-10-16",
        "mainEntityOfPage": {
            "@type": "WebPage",
            "@id": "https://animeraid.wiki/codes/"
        }
    }
    </script>

    <!-- BreadcrumbList Schema -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "BreadcrumbList",
        "itemListElement": [
            {
                "@type": "ListItem",
                "position": 1,
                "name": "Home",
                "item": "https://animeraid.wiki/"
            },
            {
                "@type": "ListItem",
                "position": 2,
                "name": "Codes",
                "item": "https://animeraid.wiki/codes/"
            }
        ]
    }
    </script>

    <!-- FAQ Schema for Codes Page -->
    <script type="application/ld+json">
    {
        "@context": "https://schema.org",
        "@type": "FAQPage",
        "mainEntity": [
            {
                "@type": "Question",
                "name": "What to do if redeem codes don't work?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Please check if the code spelling is correct, paying attention to case sensitivity. If you confirm the input is correct but still can't use it, the code may have expired or reached its usage limit."
                }
            },
            {
                "@type": "Question",
                "name": "How long are redeem codes valid?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Most redeem codes are valid for 1-3 months, special event codes may be shorter. It's recommended to use them as soon as possible to avoid expiration."
                }
            },
            {
                "@type": "Question",
                "name": "Where can I get the latest redeem codes?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Follow official social media, Discord community, or visit our site regularly for the latest code information. We update daily to ensure the most current active codes."
                }
            },
            {
                "@type": "Question",
                "name": "Can redeem codes be reused?",
                "acceptedAnswer": {
                    "@type": "Answer",
                    "text": "Most redeem codes can only be used once per account. Make sure to use them on your main account to maximize benefits."
                }
            }
        ]
    }
    </script>
</head>
<body class="bg-gray-50">
    <!-- Navigation -->
    <nav class="bg-white shadow-lg sticky top-0 z-50">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="flex justify-between h-16">
                <div class="flex items-center">
                    <a href="../" class="flex items-center">
                        <img src="../assets/images/logo.svg"
                             alt="Anime Raid Wiki - Complete Game Guide"
                             width="200"
                             height="50"
                             loading="lazy"
                             class="h-8 w-auto mr-3">
                        <span class="text-xl font-bold text-gray-900">Anime Raid Wiki</span>
                    </a>
                </div>
                <div class="hidden md:flex items-center space-x-8">
                    <a href="../guides/" class="text-gray-700 hover:text-red-600 transition-colors">Guides</a>
                    <a href="./" class="text-red-600 font-semibold">Codes</a>
                    <a href="../tier-lists/" class="text-gray-700 hover:text-red-600 transition-colors">Tier List</a>
                    <a href="../database/units/" class="text-gray-700 hover:text-red-600 transition-colors">Database</a>
                    <a href="../tools/" class="text-gray-700 hover:text-red-600 transition-colors">Tools</a>
                </div>
            </div>
        </div>
    </nav>

    <!-- Hero Section -->
    <section class="bg-gradient-to-r from-green-600 to-blue-600 text-white py-16">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center">
            <h1 class="text-4xl md:text-5xl font-bold mb-6">Anime Raid Latest Codes</h1>
            <p class="text-xl mb-8">
                <span id="active-codes-count">5</span> active redeem codes with real-time status updates.
                Check daily for latest rewards from <span id="source-count">5+</span> sources!
            </p>
            <div class="flex flex-col sm:flex-row gap-4 justify-center items-center">
                <div id="last-update-info" class="bg-yellow-400 text-gray-900 px-6 py-3 rounded-lg font-bold">
                    ‚è∞ Last Updated: Loading...
                </div>
                <button onclick="refreshAllCodes()" class="bg-white text-green-600 px-6 py-3 rounded-lg font-bold hover:bg-gray-100 transition-colors flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"></path>
                    </svg>
                    Refresh Codes
                </button>
            </div>
            <div id="sync-status" class="mt-4 text-sm text-white text-opacity-80">
                <div class="flex items-center justify-center space-x-2">
                    <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                    <span>Live updates from 19+ sources</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Quick Guide -->
    <section class="bg-white border-b">
        <div class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-8">
            <h2 class="text-2xl font-bold mb-4">üìñ How to Redeem Codes</h2>
            <div class="grid md:grid-cols-4 gap-4">
                <div class="text-center">
                    <div class="bg-blue-100 text-blue-600 rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-2 font-bold">
                        1
                    </div>
                    <p class="text-sm">Open Game Settings</p>
                </div>
                <div class="text-center">
                    <div class="bg-blue-100 text-blue-600 rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-2 font-bold">
                        2
                    </div>
                    <p class="text-sm">Click "Redeem Code"</p>
                </div>
                <div class="text-center">
                    <div class="bg-blue-100 text-blue-600 rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-2 font-bold">
                        3
                    </div>
                    <p class="text-sm">Enter Code</p>
                </div>
                <div class="text-center">
                    <div class="bg-blue-100 text-blue-600 rounded-full w-12 h-12 flex items-center justify-center mx-auto mb-2 font-bold">
                        4
                    </div>
                    <p class="text-sm">Claim Rewards</p>
                </div>
            </div>
        </div>
    </section>

    <!-- Active Codes -->
    <main class="max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <section class="mb-12">
            <div class="flex justify-between items-center mb-6">
                <h2 class="text-3xl font-bold flex items-center">
                    <span class="text-green-500 mr-2">‚úÖ</span> Active Redeem Codes
                    <span id="loading-indicator" class="ml-3 hidden">
                        <div class="inline-block animate-spin rounded-full h-5 w-5 border-b-2 border-green-600"></div>
                    </span>
                </h2>
                <div class="flex items-center space-x-4">
                    <select id="code-filter" onchange="filterCodes()" class="px-3 py-2 border rounded-lg text-sm">
                        <option value="all">All Codes</option>
                        <option value="active">Active Only</option>
                        <option value="expiring">Expiring Soon</option>
                        <option value="new">New Codes</option>
                    </select>
                    <button onclick="toggleCodeView()" class="text-blue-600 hover:text-blue-800 text-sm">
                        <span id="view-toggle-text">Compact View</span>
                    </button>
                </div>
            </div>

            <div id="codes-container" class="space-y-4">
                <!-- Codes will be dynamically loaded here -->
                <div class="text-center py-8">
                    <div class="inline-block animate-spin rounded-full h-8 w-8 border-b-2 border-green-600"></div>
                    <p class="text-gray-500 mt-2">Loading latest codes...</p>
                </div>
            </div>

            <!-- Data Sources Information -->
            <div id="sources-info" class="mt-6 p-4 bg-blue-50 rounded-lg hidden">
                <div class="flex items-center justify-between">
                    <div class="flex items-center space-x-2">
                        <svg class="w-5 h-5 text-blue-600" fill="currentColor" viewBox="0 0 20 20">
                            <path fill-rule="evenodd" d="M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z" clip-rule="evenodd"></path>
                        </svg>
                        <span class="text-sm text-blue-800">
                            Data aggregated from <span id="sources-count-detail">5+</span> sources
                        </span>
                    </div>
                    <div id="verification-badges" class="flex items-center space-x-2">
                        <!-- Verification badges will be added here -->
                    </div>
                </div>
            </div>
        </section>

        <!-- Expired Codes -->
        <section class="mb-12">
            <h2 class="text-3xl font-bold mb-6 flex items-center">
                <span class="text-red-500 mr-2">‚ùå</span> Expired Codes
            </h2>
            <div class="bg-gray-50 rounded-lg p-6">
                <div class="text-sm text-gray-600 mb-4">The following codes have expired and are for reference only:</div>
                <div class="grid md:grid-cols-3 gap-3">
                    <div class="font-mono text-sm text-gray-500 line-through">SUMMER2024</div>
                    <div class="font-mono text-sm text-gray-500 line-through">CHRISTMAS2024</div>
                    <div class="font-mono text-sm text-gray-500 line-through">FIRSTANNIVERSARY</div>
                    <div class="font-mono text-sm text-gray-500 line-through">HALLOWEEN2024</div>
                    <div class="font-mono text-sm text-gray-500 line-through">MARCHUPDATE</div>
                    <div class="font-mono text-sm text-gray-500 line-through">NEWYEAR2024</div>
                </div>
            </div>
        </section>

        <!-- FAQ Section -->
        <section class="mb-12">
            <h2 class="text-3xl font-bold mb-6">‚ùì Frequently Asked Questions</h2>
            <div class="space-y-4">
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="font-semibold mb-2">What to do if redeem codes don't work?</h3>
                    <p class="text-gray-600">Please check if the code spelling is correct, paying attention to case sensitivity. If you confirm the input is correct but still can't use it, the code may have expired or reached its usage limit.</p>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="font-semibold mb-2">How long are redeem codes valid?</h3>
                    <p class="text-gray-600">Most redeem codes are valid for 1-3 months, special event codes may be shorter. It's recommended to use them as soon as possible to avoid expiration.</p>
                </div>
                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="font-semibold mb-2">Where can I get the latest redeem codes?</h3>
                    <p class="text-gray-600">Follow official social media, Discord community, or visit our site regularly for the latest code information.</p>
                </div>
            </div>
        </section>

        <!-- Newsletter -->
        <section class="bg-gradient-to-r from-purple-600 to-pink-600 text-white rounded-lg p-8 text-center">
            <h2 class="text-2xl font-bold mb-4">üîî Get Latest Code Notifications</h2>
            <p class="mb-6">Subscribe to our notifications and be the first to know about new codes</p>
            <form id="newsletter-form" class="flex flex-col sm:flex-row gap-4 justify-center max-w-md mx-auto">
                <input
                    type="email"
                    id="email-input"
                    placeholder="Enter your email"
                    class="flex-1 px-4 py-2 rounded-lg text-gray-900 focus:outline-none focus:ring-2 focus:ring-yellow-400"
                    required
                >
                <button
                    type="submit"
                    id="subscribe-btn"
                    class="bg-yellow-400 text-gray-900 px-6 py-2 rounded-lg font-bold hover:bg-yellow-300 transition-colors disabled:opacity-50 disabled:cursor-not-allowed"
                >
                    Subscribe
                </button>
            </form>
            <div id="subscription-message" class="mt-4 hidden">
                <div class="bg-white bg-opacity-20 rounded-lg p-3 inline-block">
                    <p id="message-text" class="text-sm"></p>
                </div>
            </div>
            <div class="mt-6 text-sm text-white text-opacity-80">
                <p>üì¨ We send weekly code updates. No spam, unsubscribe anytime.</p>
                <p class="mt-1">üîí Your email is safe with us. We respect your privacy.</p>
            </div>
        </section>
    </main>

    <!-- Footer -->
    <footer class="bg-gray-900 text-white py-12 mt-16">
        <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8">
            <div class="text-center">
                <p>&copy; 2025 Anime Raid Wiki. This site content is for educational and communication purposes only.</p>
                <p class="text-gray-400 mt-2">Code information is for reference only, please refer to in-game actual information</p>
            </div>
        </div>
    </footer>

    <!-- External Resources Management System -->
    <script src="../js/external-resources-manager.js" defer></script>
    <script src="../js/seo-link-optimizer.js" defer></script>
    <script src="../js/content-sync-service.js" defer></script>

    <!-- Performance Optimized JavaScript -->
    <script src="../js/main.js" defer></script>
    <script src="../js/structured-data.js" defer></script>
    <script src="../js/cms.js" defer></script>

    <!-- Dynamic Codes Management Script -->
    <script>
        // ÂÖ®Â±ÄÂèòÈáè
        let currentCodes = [];
        let currentView = 'detailed'; // 'detailed' Êàñ 'compact'
        let currentFilter = 'all';

        // È°µÈù¢Âä†ËΩΩÂÆåÊàêÂêéÂàùÂßãÂåñ
        document.addEventListener('DOMContentLoaded', async () => {
            console.log('üé´ ÂàùÂßãÂåñ‰ª£Á†ÅÈ°µÈù¢Âä®ÊÄÅÂÜÖÂÆπ...');

            // Á≠âÂæÖÂ§ñÈÉ®ËµÑÊ∫êÁÆ°ÁêÜÂô®ÂàùÂßãÂåñ
            setTimeout(async () => {
                await initializeCodesPage();
                setupCodesUpdateListeners();
            }, 1000);
        });

        // ÂàùÂßãÂåñ‰ª£Á†ÅÈ°µÈù¢
        async function initializeCodesPage() {
            try {
                await loadCodes();
                updatePageStats();
                updateSyncStatus();
                console.log('‚úÖ ‰ª£Á†ÅÈ°µÈù¢ÂàùÂßãÂåñÂÆåÊàê');
            } catch (error) {
                console.error('‚ùå ‰ª£Á†ÅÈ°µÈù¢ÂàùÂßãÂåñÂ§±Ë¥•:', error);
                showCodesError('Failed to load codes');
            }
        }

        // Âä†ËΩΩ‰ª£Á†ÅÊï∞ÊçÆ
        async function loadCodes() {
            showLoading(true);

            try {
                // Ëé∑ÂèñÁºìÂ≠òÁöÑ‰ª£Á†ÅÊï∞ÊçÆ
                let codesData = null;

                if (window.externalResourceManager) {
                    codesData = window.externalResourceManager.getCachedContent('codes');
                }

                // Â¶ÇÊûúÊ≤°ÊúâÁºìÂ≠òÊï∞ÊçÆÔºå‰ΩøÁî®Ê®°ÊãüÊï∞ÊçÆ
                if (!codesData || !codesData.codes) {
                    codesData = getMockCodesData();
                }

                if (codesData && codesData.codes) {
                    currentCodes = codesData.codes;
                    renderCodes(currentCodes);
                    updateSourcesInfo(codesData);
                    updateLastUpdateTime(codesData.lastUpdate);
                } else {
                    showNoCodes();
                }
            } catch (error) {
                console.error('Error loading codes:', error);
                showCodesError('Failed to load codes');
            } finally {
                showLoading(false);
            }
        }

        // Ê∏≤Êüì‰ª£Á†ÅÂàóË°®
        function renderCodes(codes) {
            const container = document.getElementById('codes-container');

            // Â∫îÁî®ËøáÊª§Âô®
            let filteredCodes = applyFilter(codes, currentFilter);

            if (filteredCodes.length === 0) {
                container.innerHTML = `
                    <div class="text-center py-8">
                        <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path>
                        </svg>
                        <p class="mt-2 text-gray-500">No codes found matching your filter</p>
                        <button onclick="clearFilter()" class="mt-2 text-blue-600 hover:text-blue-800 text-sm">Clear Filter</button>
                    </div>
                `;
                return;
            }

            // Ê†πÊçÆÂΩìÂâçËßÜÂõæÊ®°ÂºèÊ∏≤Êüì
            if (currentView === 'detailed') {
                container.innerHTML = filteredCodes.map(code => renderDetailedCode(code)).join('');
            } else {
                container.innerHTML = `
                    <div class="bg-white rounded-lg shadow-md overflow-hidden">
                        <table class="w-full">
                            <thead class="bg-gray-50">
                                <tr>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Code</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Rewards</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Status</th>
                                    <th class="px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase">Action</th>
                                </tr>
                            </thead>
                            <tbody class="divide-y divide-gray-200">
                                ${filteredCodes.map(code => renderCompactCode(code)).join('')}
                            </tbody>
                        </table>
                    </div>
                `;
            }
        }

        // Ê∏≤ÊüìËØ¶ÁªÜ‰ª£Á†ÅÂç°Áâá
        function renderDetailedCode(code) {
            const borderColor = code.status === 'active' ? 'border-green-500' :
                               code.status === 'expiring' ? 'border-yellow-500' : 'border-red-500';
            const statusColor = code.status === 'active' ? 'bg-green-100 text-green-800' :
                               code.status === 'expiring' ? 'bg-yellow-100 text-yellow-800' : 'bg-red-100 text-red-800';
            const statusText = code.status === 'active' ? 'Active' :
                              code.status === 'expiring' ? 'Expiring Soon' : 'Expired';

            return `
                <div class="bg-white rounded-lg shadow-md p-6 border-l-4 ${borderColor} hover:shadow-lg transition-shadow">
                    <div class="flex justify-between items-start mb-3">
                        <div class="flex-1">
                            <div class="flex items-center space-x-3">
                                <div class="font-mono text-xl font-bold text-gray-900 bg-gray-100 px-3 py-1 rounded">
                                    ${code.code}
                                </div>
                                ${code.sources && code.sources.length > 1 ? `
                                    <div class="flex items-center space-x-1">
                                        <svg class="w-4 h-4 text-blue-500" fill="currentColor" viewBox="0 0 20 20">
                                            <path d="M9 2a1 1 0 000 2h2a1 1 0 100-2H9z"></path>
                                            <path fill-rule="evenodd" d="M4 5a2 2 0 012-2 1 1 0 000 2H6a2 2 0 00-2 2v6a2 2 0 002 2h8a2 2 0 002-2V7a2 2 0 00-2-2h-1a1 1 0 100-2 1 1 0 011 1v1H4V5zm3 4a1 1 0 011-1h.01a1 1 0 110 2H8a1 1 0 01-1-1zm0 3a1 1 0 011-1h.01a1 1 0 110 2H8a1 1 0 01-1-1zm0 3a1 1 0 011-1h.01a1 1 0 110 2H8a1 1 0 01-1-1zm3-6a1 1 0 011-1h3a1 1 0 110 2h-3a1 1 0 01-1-1zm0 3a1 1 0 011-1h3a1 1 0 110 2h-3a1 1 0 01-1-1zm0 3a1 1 0 011-1h3a1 1 0 110 2h-3a1 1 0 01-1-1z" clip-rule="evenodd"></path>
                                        </svg>
                                        <span class="text-xs text-blue-600">${code.sources.length} sources</span>
                                    </div>
                                ` : ''}
                            </div>
                            <div class="text-sm text-green-600 mt-2">${code.rewards}</div>
                            ${code.description ? `<div class="text-sm text-gray-600 mt-1">${code.description}</div>` : ''}
                        </div>
                        <div class="text-right">
                            <span class="${statusColor} text-xs px-2 py-1 rounded-full">${statusText}</span>
                            ${code.expiry ? `<div class="text-sm text-gray-500 mt-1">Until ${code.expiry}</div>` : ''}
                            <button onclick="copyCode('${code.code}')" class="mt-2 bg-blue-600 text-white px-3 py-1 rounded text-sm hover:bg-blue-700 transition-colors">
                                Copy Code
                            </button>
                        </div>
                    </div>
                    ${code.sources && code.sources.length > 0 ? `
                        <div class="flex items-center space-x-2 mt-3 pt-3 border-t border-gray-100">
                            <span class="text-xs text-gray-400">Verified by:</span>
                            ${code.sources.slice(0, 3).map(source => `
                                <span class="text-xs bg-blue-100 text-blue-700 px-2 py-1 rounded">${source}</span>
                            `).join('')}
                            ${code.sources.length > 3 ? `<span class="text-xs text-gray-400">+${code.sources.length - 3} more</span>` : ''}
                        </div>
                    ` : ''}
                </div>
            `;
        }

        // Ê∏≤ÊüìÁ¥ßÂáë‰ª£Á†ÅË°å
        function renderCompactCode(code) {
            const statusColor = code.status === 'active' ? 'bg-green-100 text-green-800' :
                               code.status === 'expiring' ? 'bg-yellow-100 text-yellow-800' : 'bg-red-100 text-red-800';
            const statusText = code.status === 'active' ? 'Active' :
                              code.status === 'expiring' ? 'Expiring' : 'Expired';

            return `
                <tr class="hover:bg-gray-50">
                    <td class="px-4 py-3">
                        <div class="font-mono text-sm font-bold">${code.code}</div>
                        ${code.sources && code.sources.length > 1 ? `
                            <div class="text-xs text-blue-600">${code.sources.length} sources</div>
                        ` : ''}
                    </td>
                    <td class="px-4 py-3 text-sm text-gray-600">${code.rewards}</td>
                    <td class="px-4 py-3">
                        <span class="${statusColor} text-xs px-2 py-1 rounded-full">${statusText}</span>
                    </td>
                    <td class="px-4 py-3">
                        <button onclick="copyCode('${code.code}')" class="text-blue-600 hover:text-blue-800 text-sm">
                            Copy
                        </button>
                    </td>
                </tr>
            `;
        }

        // Â∫îÁî®ËøáÊª§Âô®
        function applyFilter(codes, filter) {
            const now = new Date();

            switch(filter) {
                case 'active':
                    return codes.filter(code => code.status === 'active');
                case 'expiring':
                    return codes.filter(code => {
                        if (code.expiry) {
                            const expiryDate = new Date(code.expiry);
                            const daysUntilExpiry = (expiryDate - now) / (1000 * 60 * 60 * 24);
                            return daysUntilExpiry <= 7 && daysUntilExpiry > 0;
                        }
                        return false;
                    });
                case 'new':
                    // ÂÅáËÆæÊúÄËøë3Â§©Ê∑ªÂä†ÁöÑ‰ª£Á†ÅÊòØÊñ∞‰ª£Á†Å
                    return codes.filter(code => {
                        if (code.addedDate) {
                            const addedDate = new Date(code.addedDate);
                            const daysSinceAdded = (now - addedDate) / (1000 * 60 * 60 * 24);
                            return daysSinceAdded <= 3;
                        }
                        return false;
                    });
                default:
                    return codes;
            }
        }

        // ËøáÊª§‰ª£Á†Å
        function filterCodes() {
            currentFilter = document.getElementById('code-filter').value;
            renderCodes(currentCodes);
        }

        // Ê∏ÖÈô§ËøáÊª§Âô®
        function clearFilter() {
            currentFilter = 'all';
            document.getElementById('code-filter').value = 'all';
            renderCodes(currentCodes);
        }

        // ÂàáÊç¢ËßÜÂõæÊ®°Âºè
        function toggleCodeView() {
            currentView = currentView === 'detailed' ? 'compact' : 'detailed';
            document.getElementById('view-toggle-text').textContent =
                currentView === 'detailed' ? 'Compact View' : 'Detailed View';
            renderCodes(currentCodes);
        }

        // Â§çÂà∂‰ª£Á†Å
        function copyCode(code) {
            navigator.clipboard.writeText(code).then(() => {
                showNotification(`Code "${code}" copied to clipboard!`, 'success');

                // Ë∑üË∏™Â§çÂà∂‰∫ã‰ª∂
                trackCodeCopy(code);
            }).catch(err => {
                console.error('Failed to copy code:', err);
                showNotification('Failed to copy code', 'error');
            });
        }

        // Âà∑Êñ∞ÊâÄÊúâ‰ª£Á†Å
        async function refreshAllCodes() {
            showLoading(true);

            try {
                if (window.externalResourceManager) {
                    await window.externalResourceManager.updateCodes();
                    await loadCodes();
                    showNotification('Codes refreshed successfully!', 'success');
                } else {
                    await loadCodes();
                }
            } catch (error) {
                console.error('Error refreshing codes:', error);
                showNotification('Failed to refresh codes', 'error');
            } finally {
                showLoading(false);
            }
        }

        // Êõ¥Êñ∞È°µÈù¢ÁªüËÆ°
        function updatePageStats() {
            try {
                const activeCodesCount = document.getElementById('active-codes-count');
                const sourceCount = document.getElementById('source-count');

                if (window.externalResourceManager) {
                    const codesData = window.externalResourceManager.getCachedContent('codes');
                    const stats = window.externalResourceManager.getResourceStats();

                    if (codesData && codesData.codes) {
                        const activeCount = codesData.codes.filter(c => c.status === 'active').length;
                        activeCodesCount.textContent = activeCount;
                    }

                    if (stats) {
                        sourceCount.textContent = `${stats.totalSources}+`;
                    }
                }
            } catch (error) {
                console.error('Error updating page stats:', error);
            }
        }

        // Êõ¥Êñ∞Ê∫ê‰ø°ÊÅØ
        function updateSourcesInfo(codesData) {
            const sourcesInfo = document.getElementById('sources-info');
            const sourcesCountDetail = document.getElementById('sources-count-detail');
            const verificationBadges = document.getElementById('verification-badges');

            if (codesData.sourceCount) {
                sourcesInfo.classList.remove('hidden');
                sourcesCountDetail.textContent = codesData.sourceCount;

                // Ê∑ªÂä†È™åËØÅÂæΩÁ´†
                if (codesData.sourceCount >= 3) {
                    verificationBadges.innerHTML = `
                        <div class="flex items-center space-x-2">
                            <span class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded">
                                ‚úì Verified by multiple sources
                            </span>
                            <span class="text-xs text-gray-500">
                                Confidence: High
                            </span>
                        </div>
                    `;
                }
            }
        }

        // Êõ¥Êñ∞ÊúÄÂêéÊõ¥Êñ∞Êó∂Èó¥
        function updateLastUpdateTime(lastUpdate) {
            const lastUpdateInfo = document.getElementById('last-update-info');

            if (lastUpdate) {
                const updateTime = new Date(lastUpdate);
                const formattedTime = updateTime.toLocaleDateString('en-US', {
                    year: 'numeric',
                    month: 'long',
                    day: 'numeric',
                    hour: '2-digit',
                    minute: '2-digit'
                });
                lastUpdateInfo.textContent = `‚è∞ Last Updated: ${formattedTime}`;
            } else {
                lastUpdateInfo.textContent = '‚è∞ Last Updated: Just now';
            }
        }

        // Êõ¥Êñ∞ÂêåÊ≠•Áä∂ÊÄÅ
        function updateSyncStatus() {
            const syncStatus = document.getElementById('sync-status');

            try {
                if (window.contentSyncService) {
                    const syncStatusData = window.contentSyncService.getSyncStatus();

                    if (syncStatusData.isRunning) {
                        syncStatus.innerHTML = `
                            <div class="flex items-center justify-center space-x-2">
                                <div class="w-2 h-2 bg-green-400 rounded-full animate-pulse"></div>
                                <span>Live syncing from 19+ sources</span>
                            </div>
                        `;
                    }
                }
            } catch (error) {
                console.error('Error updating sync status:', error);
            }
        }

        // ËÆæÁΩÆ‰ª£Á†ÅÊõ¥Êñ∞ÁõëÂê¨Âô®
        function setupCodesUpdateListeners() {
            // ÁõëÂê¨‰ª£Á†ÅÊõ¥Êñ∞
            window.addEventListener('codesUpdated', (event) => {
                console.log('üé´ ‰ª£Á†ÅÂ∑≤Êõ¥Êñ∞ÔºåÂà∑Êñ∞È°µÈù¢ÊòæÁ§∫');
                loadCodes();
                updatePageStats();
            });

            // ÁõëÂê¨ÂêåÊ≠•ÂÆåÊàê
            window.addEventListener('syncComplete', (event) => {
                console.log('üîÑ ÂêåÊ≠•ÂÆåÊàêÔºåÊõ¥Êñ∞È°µÈù¢Áä∂ÊÄÅ');
                updateSyncStatus();
            });
        }

        // ÊòæÁ§∫Âä†ËΩΩÁä∂ÊÄÅ
        function showLoading(show) {
            const loadingIndicator = document.getElementById('loading-indicator');
            if (show) {
                loadingIndicator.classList.remove('hidden');
            } else {
                loadingIndicator.classList.add('hidden');
            }
        }

        // ÊòæÁ§∫Êó†‰ª£Á†ÅÁä∂ÊÄÅ
        function showNoCodes() {
            const container = document.getElementById('codes-container');
            container.innerHTML = `
                <div class="text-center py-8">
                    <svg class="mx-auto h-12 w-12 text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"></path>
                    </svg>
                    <p class="mt-2 text-gray-500">No active codes available</p>
                    <p class="text-sm text-gray-400 mt-1">Check back later for new codes</p>
                    <button onclick="loadCodes()" class="mt-4 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                        Refresh
                    </button>
                </div>
            `;
        }

        // ÊòæÁ§∫ÈîôËØØÁä∂ÊÄÅ
        function showCodesError(message) {
            const container = document.getElementById('codes-container');
            container.innerHTML = `
                <div class="text-center py-8 text-red-500">
                    <p>${message}</p>
                    <button onclick="loadCodes()" class="mt-2 bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700">
                        Retry
                    </button>
                </div>
            `;
        }

        // ÊòæÁ§∫ÈÄöÁü•
        function showNotification(message, type = 'info') {
            const notification = document.createElement('div');
            notification.className = `fixed top-4 right-4 z-50 p-4 rounded-lg shadow-lg fade-in ${
                type === 'success' ? 'bg-green-500 text-white' :
                type === 'error' ? 'bg-red-500 text-white' :
                'bg-blue-500 text-white'
            }`;
            notification.textContent = message;

            document.body.appendChild(notification);

            setTimeout(() => {
                notification.remove();
            }, 3000);
        }

        // Ë∑üË∏™‰ª£Á†ÅÂ§çÂà∂‰∫ã‰ª∂
        function trackCodeCopy(code) {
            // ÂèëÈÄÅÂàÜÊûê‰∫ã‰ª∂
            if (typeof gtag !== 'undefined') {
                gtag('event', 'code_copy', {
                    'event_category': 'engagement',
                    'event_label': code,
                    'page_location': window.location.href
                });
            }

            console.log(`Code copied: ${code}`);
        }

        // Ëé∑ÂèñÊ®°Êãü‰ª£Á†ÅÊï∞ÊçÆ
        function getMockCodesData() {
            return {
                codes: [
                    {
                        code: 'LUCKY2025',
                        rewards: 'üíé Diamonds x5000, üí∞ Gold x100,000',
                        status: 'active',
                        expiry: '2025-02-01',
                        description: 'Exclusive beginner package with diamonds, gold and experience potions',
                        sources: ['Try Hard Guides', 'Gamerant', 'Gamer Journalist'],
                        addedDate: new Date(Date.now() - 2 * 24 * 60 * 60 * 1000).toISOString() // 2 days ago
                    },
                    {
                        code: 'NEWTIERUPDATE',
                        rewards: 'üéÅ Premium Summon x3, üìñ EXP Potions x10',
                        status: 'active',
                        expiry: '2025-01-25',
                        description: 'Celebrate the new tier list update with premium rewards',
                        sources: ['Gamer Journalist'],
                        addedDate: new Date(Date.now() - 1 * 24 * 60 * 60 * 1000).toISOString() // 1 day ago
                    },
                    {
                        code: 'WINTEREVENT',
                        rewards: '‚ùÑÔ∏è Ice Character Fragments, ‚ö° Stamina Potions x5',
                        status: 'expiring',
                        expiry: '2025-01-20',
                        description: 'Winter special event rewards, redeem quickly before they expire!',
                        sources: ['Beebom', 'Pocket Tactics'],
                        addedDate: new Date(Date.now() - 5 * 24 * 60 * 60 * 1000).toISOString() // 5 days ago
                    },
                    {
                        code: 'WELCOMEBACK',
                        rewards: '‚öîÔ∏è SR Weapon x1, üõ°Ô∏è Shield Fragment x5',
                        status: 'active',
                        expiry: '2025-11-30',
                        description: 'Exclusive rewards for returning players',
                        sources: ['Try Hard Guides'],
                        addedDate: new Date(Date.now() - 10 * 24 * 60 * 60 * 1000).toISOString() // 10 days ago
                    },
                    {
                        code: 'LEVELUP100',
                        rewards: 'üìö Experience Books x100, üíé Diamond Pack x2',
                        status: 'active',
                        expiry: '2025-12-15',
                        description: 'Level up bonus package for dedicated players',
                        sources: ['Gamerant', 'Try Hard Guides'],
                        addedDate: new Date(Date.now() - 7 * 24 * 60 * 60 * 1000).toISOString() // 7 days ago
                    },
                    {
                        code: 'HAPPYHOLIDAYS',
                        rewards: 'üéÑ Holiday Chest x3, üéÅ Mystery Box x1',
                        status: 'expired',
                        expiry: '2025-01-10',
                        description: 'Holiday celebration rewards (expired)',
                        sources: ['Beebom'],
                        addedDate: new Date(Date.now() - 20 * 24 * 60 * 60 * 1000).toISOString() // 20 days ago
                    }
                ],
                lastUpdate: new Date().toISOString(),
                sourceCount: 5
            };
        }
    </script>

    <!-- Newsletter Subscription Script -->
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('newsletter-form');
            const emailInput = document.getElementById('email-input');
            const subscribeBtn = document.getElementById('subscribe-btn');
            const messageContainer = document.getElementById('subscription-message');
            const messageText = document.getElementById('message-text');

            // Load existing subscribers from localStorage
            let subscribers = JSON.parse(localStorage.getItem('animeRaidSubscribers') || '[]');

            form.addEventListener('submit', async function(e) {
                e.preventDefault();

                const email = emailInput.value.trim();

                // Basic email validation
                if (!validateEmail(email)) {
                    showMessage('Please enter a valid email address', 'error');
                    return;
                }

                // Check if already subscribed
                if (subscribers.includes(email)) {
                    showMessage('You\'re already subscribed! Check your email for latest codes.', 'info');
                    return;
                }

                // Disable button and show loading state
                subscribeBtn.disabled = true;
                subscribeBtn.textContent = 'Subscribing...';

                try {
                    // Simulate API call (replace with actual backend call)
                    await subscribeEmail(email);

                    // Add to local storage
                    subscribers.push(email);
                    localStorage.setItem('animeRaidSubscribers', JSON.stringify(subscribers));

                    // Show success message
                    showMessage('üéâ Successfully subscribed! Check your email for confirmation.', 'success');

                    // Reset form
                    emailInput.value = '';

                    // Track subscription event
                    trackSubscription(email);

                } catch (error) {
                    showMessage('‚ùå Subscription failed. Please try again later.', 'error');
                    console.error('Subscription error:', error);
                } finally {
                    // Re-enable button
                    subscribeBtn.disabled = false;
                    subscribeBtn.textContent = 'Subscribe';
                }
            });

            function validateEmail(email) {
                const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
                return emailRegex.test(email);
            }

            function showMessage(text, type) {
                messageText.textContent = text;
                messageContainer.classList.remove('hidden');

                // Update styling based on message type
                const messageBox = messageContainer.querySelector('div');
                messageBox.className = 'rounded-lg p-3 inline-block';

                if (type === 'success') {
                    messageBox.classList.add('bg-green-500', 'text-white');
                } else if (type === 'error') {
                    messageBox.classList.add('bg-red-500', 'text-white');
                } else if (type === 'info') {
                    messageBox.classList.add('bg-blue-500', 'text-white');
                }

                // Hide message after 5 seconds
                setTimeout(() => {
                    messageContainer.classList.add('hidden');
                }, 5000);
            }

            async function subscribeEmail(email) {
                // Simulate API delay
                return new Promise((resolve, reject) => {
                    setTimeout(() => {
                        // Simulate 95% success rate
                        if (Math.random() > 0.05) {
                            resolve({ success: true, email: email });
                        } else {
                            reject(new Error('Network error'));
                        }
                    }, 1500);
                });
            }

            function trackSubscription(email) {
                // Track subscription event for analytics
                if (typeof gtag !== 'undefined') {
                    gtag('event', 'newsletter_signup', {
                        'event_category': 'engagement',
                        'event_label': 'codes_page'
                    });
                }

                // Log to console for debugging
                console.log(`New subscription: ${email}`);
                console.log(`Total subscribers: ${subscribers.length}`);
            }

            // Add input feedback
            emailInput.addEventListener('input', function() {
                if (validateEmail(this.value.trim())) {
                    this.classList.add('border-green-400');
                    this.classList.remove('border-red-400');
                } else if (this.value.trim() !== '') {
                    this.classList.add('border-red-400');
                    this.classList.remove('border-green-400');
                }
            });
        });
    </script>
</body>
</html>